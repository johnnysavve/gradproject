<!DOCTYPE html>
<html>

<!---- import libraries ---->
<head>
<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.5.0/aframe/build/aframe-ar.js"></script>
<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.8.4/dist/aframe-extras.min.js"></script>
<script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
<meta name="apple-mobile-web-app-capable" content="yes">

<script>
	AFRAME.registerComponent('vidhandler', {
	  // ...
	  init: function () {
			// Set up initial state and variables.
			var self = this;
	    this.toggle = false;
			this.vid = document.querySelector("#vid");
			
			window.addEventListener('click', function () {
				self.vid.play();
			});
	  },
	  tick:function() {
	    
			if(this.el.object3D.visible == true){
				if(!this.toggle){
				this.toggle = true;
				this.vid.play();
				}
			} else{
				this.toggle = false;
				this.vid.pause();
			}
	  }
	});

	webview.allowsInlineMediaPlayback = true;

	window.addEventListener('click', function () {
		var v = document.querySelector('#vid');
		v.play();
	});
</script>
</head>

<body style='margin : 0px; overflow: hidden;'>

    <a-scene embedded artoolkit='sourceType: webcam; detectionMode: mono; maxDetectionRate: 30; canvasWidth: 240; canvasHeight: 180' >
    <a-assets>
      <video id="vid" src="small.mp4" loop="true" webkit-playsinline playsinline controls autoplay>
    </a-assets>
   
    <a-marker id="memarker" preset="hiro" vidhandler>
      <a-video position='0 0 0' rotation="90 180 0" play-on-window-click play="true" material='transparent:true;opacity: 0.7;src:#vid'></a-video>
    </a-marker>
  	<a-camera-static></a-camera-static>
  </a-scene>
</body>

</html>

<!---- <a-image id="test" src="howtoo.png" position="0 0 0" rotation="-90 0 0" width="" height="" opacity="1" transparent="true" alpha-test="0.2" shader="standard" scale="1 1 1" visible="" material="" geometry=""></a-image> --->